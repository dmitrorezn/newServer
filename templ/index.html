<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Dmytro Reznichenko</title>
        <link rel="stylesheet" type="text/css" href="./css/style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
{{/*        <link href="https://fonts.googleapis.com/css2?family=Quicksand&display=swap" rel="stylesheet">*/}}
        <script type="text/javascript">
            $(document).ready(function (){
                $.get( "/data/announcements", function(data) {
                    $('.anns').empty()
                    $.each(data, function(k)  {
                        id = data[k].idstr
                        $(".middlescroll").append("<article class='searchitem'>" +
                            "<div class='searchitemimage'>"+
                            "<button class='likeimage' style='background-color:beige;' onclick='setelectedheart(this)' id='"+data[k].announsidstr+"'></button>" +
                            "</div>" +
                            "<div class='searchitemtext'><h2>"+data[k].title+"</h2>" +
                            "<ul class='touristinfo'>" +
                            "<li><p>Phone number: "+data[k].phone_number+"</p></li>" +
                            "<li><p>Email: "+data[k].email+"</p></li>" +
                            "<li><p>Start dates: "+data[k].start_dates+"</p></li>" +
                            "</ul></div>" +
                            "</article>")
                    });
                    console.log(data);
                });
                $.get( "/data/activities", function(data) {
                    $('.anns').empty()
                    $.each(data, function(k)  {
                        id = data[k].idstr
                        $("#chartitems").append("<div id="+id+">" +
                            "<ul class='chartitem' >" +
                            "<li><div class ='chartitemimage'></div></li>"+
                            "<li><p>"+data[k].name+"</p></li>" +
                            "<li><p>"+data[k].type+"</p></li>" +
                            "<li><p>"+data[k].start_date+"</p></li>"+
                            "</ul>")
                    });
                    console.log(data);
                });
            })
        function setelectedheart(elem){
            if (elem.getAttribute("select") == "true"){
                elem.setAttribute("select", "false");
                elem.style.backgroundImage = "url(heart.png)";
                removeFromChart(elem.id);
            }
            else{
                elem.setAttribute("select", "true");
                elem.style.backgroundImage = "url(hearth.png)";
                addToChart(elem.id)
            }
        };
        function addToChart(item){
            let newitem = document.createElement('div');
            newitem.id = item + "chart";
            let ul = document.createElement('ul');
            ul.className = "chartitem";
            let titleli = document.createElement('li');
            let nameli = document.createElement('li');
            let dateli = document.createElement('li');

            let imagediv = document.createElement('div');
            imagediv.className = "chartitemimage";
            imagediv.style.backgroundImage = document.getElementById(item + "image").style.backgroundImage;

            titleli.innerHTML = "<p>" + item + "</p>";
            nameli.innerHTML = "<p>Name</p>";
            dateli.innerHTML = "<p>Date</p>";

            ul.append(imagediv);
            ul.append(titleli);
            ul.append(nameli);
            ul.append(dateli);

            newitem.append(ul);

            document.getElementById("chartitems").append(newitem);
        };
        function removeFromChart(item){
            let it = document.getElementById(item + "chart");
            it.parentNode.removeChild(it);
        };
        </script>
    </head>
    <body>
        <div class="leftcolumn"> <!-- all activity type lists -->
            <div class="userblock">
                <div class="username" style="margin-top: 10px">
                    <p style="margin: 0;">Dmytro Rezniczenko</p>
                </div>
            </div>
        </div>
        <div class="midcolumnn"> <!-- main menu activities list -->
            <div class="searchbounds">
                <button class="mainsearchbutton">Find</button>
                <input type="text" class="mainsearchfield">
            </div>
            <div class="middlescroll">

            </div>
        </div>
        <div class="rightcolumn"> <!-- user selected items -->
            <div class="userchart">
                <div class="chartname">
                    <p>User's chart</p>
                    <button class="chartbutton">See all</button>
                </div>
                <div class="chartitems" id="chartitems">

                </div>
            </div>
        </div>
    </body>
</html>